jenkins:
  systemMessage: "32GB SSAFY ì„œë²„ - ë³´ì•ˆ ìë™í™” ì„¤ì • ê°€ë™ ì¤‘ ğŸš€"
  
  # ê´€ë¦¬ì ê³„ì • ì„¤ì • (í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš©)
  securityRealm:
    local:
      allowsSignup: false
      users:
        - id: "${JENKINS_ADMIN_ID}"
          password: "${JENKINS_ADMIN_PASSWORD}"

  # ê¶Œí•œ ì„¤ì •: ê´€ë¦¬ìì—ê²Œ ëª¨ë“  ê¶Œí•œ ë¶€ì—¬
  authorizationStrategy:
    globalMatrix:
      permissions:
        - "Overall/Administer:${JENKINS_ADMIN_ID}"
        - "Overall/Read:authenticated"

  # GitLab ì¸ì¦ ì •ë³´ (Credentials) ìë™ ë“±ë¡
  credentials:
    system:
      domainCredentials:
        - credentials:
            - usernamePassword:
                scope: GLOBAL
                id: "gitlab-auth" # Jenkinsfileì—ì„œ ì‚¬ìš©í•  ID
                username: "${GITLAB_USERNAME}"
                password: "${GITLAB_TOKEN}" # .envì˜ í† í°ì´ ì—¬ê¸° ì£¼ì…ë¨
                description: "GitLab Private Token for Project"
  crumbIssuer:
    standard:
      excludeClientIPFromCrumb: true # í”„ë¡ì‹œë‚˜ ì»¨í…Œì´ë„ˆ í™˜ê²½ì—ì„œ í˜¸ì¶œí•  ë•Œ í•„ìˆ˜

# í”„ë¡œì íŠ¸(Job) ìë™ ìƒì„±
jobs:
  - script: >
      pipelineJob('S14P11B201-Main-Pipeline') {
        definition {
          cpsScm {
            scm {
              git {
                remote {
                  url('https://lab.ssafy.com/s14-webmobile3-sub1/S14P11B201.git')
                  credentials('gitlab-auth')
                }
                branches('master')
              }
            }
            scriptPath('Jenkinsfile') # í”„ë¡œì íŠ¸ ë£¨íŠ¸ì˜ Jenkinsfile ì½ê¸°
          }
        }
      }

# Mattermost ì•Œë¦¼ ì„¤ì • (í•„ìš” ì‹œ í”ŒëŸ¬ê·¸ì¸ ì„¤ì • ì¶”ê°€)
unclassified:
  mattermostnotifier:
    endpoint: "${MM_WEBHOOK_URL}"
  gitLabConnectionConfig:
    connections:
      - name: "GitLab"
        url: "https://lab.ssafy.com"
        apiTokenId: "gitlab-auth" # credentialsì— ë“±ë¡í•œ IDì™€ ì¼ì¹˜í•´ì•¼ í•¨
        useAuthenticatedPostReceiveRoute: true # ì´ ì˜µì…˜ì´ 403 ì—ëŸ¬ë¥¼ ë°©ì§€í•˜ëŠ” í•µì‹¬ì…ë‹ˆë‹¤!